<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homework_17.02</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body>
    <div class="container bg-light text-center">
        <div class="bg-light">
            <div class="text-center border-bottom">
                <h2>Favourite fruits</h2>
                <br>
            </div>
            <div class="form-group">
                <br>
                <label for="textInput" class="d-block">Please type your favourite fruits separated by comma:</label>
                <input type="text" id="textInput" class="form-control rounded w-50 m-auto d-block">
                <br>
                <small class="d-block">You can type fruits only from this list:</small>
                <br>
                <small class="d-block" id="allowed"></small>
                <br>
                <small class="d-block" id="invalid-input"></small>
                <br>
                <button class="btn btn-primary w-50">Add fruits</button>
            </div>
            <ul class="list-group"></ul>
        </div>
    </div>


    <script>           
        var container = document.querySelector(".container");
        var rowFruit= document.querySelector("ul");
        rowFruit.className = "";
        var input = document.querySelector("input");
        var addFruits = document.querySelector("button");
        addFruits.addEventListener("click", addToList);
        var allowedFruits = "apples, pears, oranges, pineapples, kiwis, bananas, berries, watermelons, lemons";
        var avilableFruits = document.querySelector("#allowed");
        avilableFruits.textContent = allowedFruits

        
        function addToList() {
            var inputValues = input.value ? input.value :false;
            var splittedInputValues = inputValues.split(",");        

                     
            if (inputValues !== false) {

                var notAllowedInput = [];
                
                for ( var i=0; i<splittedInputValues.length; i++ ) {
                    if ( allowedFruits.indexOf(splittedInputValues[i]) !== -1 ) {
                        insertFruit(splittedInputValues[i].trim());
                    } else if ( allowedFruits.indexOf(splittedInputValues[i]) === -1 ) {
                        notAllowedInput.push(splittedInputValues[i].trim());
                    }
                }
                if ( notAllowedInput.length > 0) {
                    input.className = "is-invalid form-control";
                    input.setAttribute("type", "text");
                    var invalidFeedback = document.querySelector("#invalid-input");
                    invalidFeedback.style.color = "red";
                    invalidFeedback.textContent = " We cant add \"" + notAllowedInput.join(", ") + "\" . Its not in our fruit list." 
                } else {
                    input.className = "is-valid form-control";
                    input.setAttribute("type", "text");
                }
            }
        }             
        function insertFruit(fruitname) {


            var fruitList = document.createElement("li");
            fruitList.textContent = input.value;
            fruitList.className = "list-group-item float-left w-100";
            rowFruit.appendChild(fruitList);

            var btn = document.createElement("button");
            btn.setAttribute("type", "button");
            btn.className = "btn btn-danger m-auto float-right";
            btn.textContent = "Delete";
            fruitList.appendChild(btn);
            btn.addEventListener("click", removeFromList);

            var div = document.createElement("div");
            div.className = "clearfix"
            container.appendChild(div);
            div.appendChild(rowFruit);


        }
        function removeFromList() {
            var fruit = this.parentElement;
            fruit.remove();
        }   
    </script>










    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>